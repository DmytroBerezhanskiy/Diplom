{% extends 'shop/base.html' %}
{% load static %}
{% load custom_tags %}
<html>
<head>
</head>
{% block context %}
<body>
{% if categories %}
<div class="splide mb-3">
        <div class="splide__track">
            <ul class="splide__list">
                {% for c in categories %}
                <li class="splide__slide"><a href="{% url 'product_category' c.slug %}">{{ c.name }}</a></li>
                {% endfor %}
            </ul>
        </div>
    </div>
{% endif %}
<div id="sidebar">
        <h3>Restaurants</h3>
        <ul>
            <li {% if not shop %} class="selected"{% endif %}>
                <a href="{% url 'product_list' %}">All</a>
            </li>
            {% for c in shops %}
                <li {% if shop.slug == c.slug %} class="selected"{% endif %}>
                    <a href="{% url 'product_list_by_shop' c.slug%}">{{ c.name }}</a>
                </li>
            {% endfor %}
        </ul>
    </div>
{% if product_list %}
<div class="row">
      {% for product in product_list %}
        <div class="post-item col-12 col-sm-6 col-md-6 col-lg-3 p-2">
          <div class="card h-100 card-product">
            <div class="card-body card-flex">
              <img src="{{ product.image.url }}" style="width:100%; height:100%">
              <h2 class="card-title">{{ product.name }}</h2>
              <p class="text-primary"><i class="far fa-calendar-alt"></i>â‚´{{ product.price}}</p>
              <p class="card-text">{{product.category|safe | truncatewords:10 }}</p>
              <p class="card-text"><a href="{{ product.get_shop_slug }}">
                  {{product.shop|safe | truncatewords:10 }}</a></p>
              <a href="{{ product.get_absolute_url }}" style="width:40%" class="btn btn-outline-primary">Read More</a>
              {% if request.user.is_authenticated %}
                {% if request.user|has_shop:product.shop %}
                <a href="{% url 'update_product' product.id product.slug %}" style="width:40%"
                   class="btn btn-outline-primary">Update</a>
                <a href="{% url 'delete_product' product.id product.slug %}" style="width:40%"
                   class="btn btn-outline-primary">Delete</a>
                {% endif %}
              {% endif %}
            </div>
          </div>
        </div>
      {% endfor %}
    </div>
{% else %}
<p style="font-style:oblique; font-size: 400%">Sorry, there are no products in this collection.</p>
{% endif %}
</body>
</html>
{% endblock context %}